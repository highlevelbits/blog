<?xml version="1.0" encoding="UTF-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <id>http://www.highlevelbits.com/</id>
  <title>atom feed</title>
  <updated>2014-11-10T23:00:00Z</updated>
  <link rel="alternate" href="http://www.highlevelbits.com/"/>
  <link rel="self" href="http://www.highlevelbits.com/atom.xml"/>
  <author>
    <name>Fredrik &amp; Hardy</name>
    <uri>http://www.highlevelbits.com</uri>
  </author>
  <entry>
    <id>tag:www.highlevelbits.com,2014-11-11:/2014/11/100-continue.html</id>
    <title type="html">Posting large files over SSL</title>
    <published>2014-11-10T23:00:00Z</published>
    <updated>2014-11-10T23:00:00Z</updated>
    <link rel="alternate" href="http://www.highlevelbits.com/2014/11/100-continue.html"/>
    <content type="html">&lt;p&gt;When posting a file in a complex setup with several layers I encountered a problem in a Java-&amp;gt;Apache interaction. I got this error message:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;[Tue Nov 11 14:55:57 2014] [error] [client &amp;lt;ip&amp;gt;] request body exceeds maximum size (131072) for SSL buffer, referer: &amp;lt;referrer-url&amp;gt;
[Tue Nov 11 14:55:57 2014] [error] [client &amp;lt;ip&amp;gt;] could not buffer message body to allow SSL renegotiation to proceed, referer: &amp;lt;referrer-url&amp;gt;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;After some googling where &lt;a href="https://stackoverflow.com/questions/14281628/ssl-renegotiation-with-client-certificate-causes-server-buffer-overflow"&gt;this stackoverflow post&lt;/a&gt; proved the most informative I learned that the upper limit for file size over SSL is rather low - just some 131702 bytes. The post lists several ways of solving the problem. I thought the header way was the neatest. I just added the header &lt;code&gt;Expect: 100-continue&lt;/code&gt; to the call and the problem disappeared. The value of the header is rather cryptic but well documented in &lt;a href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.20"&gt;the specs&lt;/a&gt;. Basically it tells the server to finish SSL negotiations before downloading the full request body from the client.&lt;/p&gt;
</content>
  </entry>
  <entry>
    <id>tag:www.highlevelbits.com,2014-10-23:/2014/10/smtp-mocking.html</id>
    <title type="html">Mocking SMTP when testing a black box of software</title>
    <published>2014-10-22T22:00:00Z</published>
    <updated>2014-10-22T22:00:00Z</updated>
    <link rel="alternate" href="http://www.highlevelbits.com/2014/10/smtp-mocking.html"/>
    <content type="html">&lt;p&gt;So I wrote a micro service that gets a REST call and sends a mail or a SMS and I wanted to have some nice black box tests in place. &lt;/p&gt;

&lt;h3 id="the-test"&gt;The test&lt;/h3&gt;

&lt;p&gt;So my test would &lt;code&gt;POST&lt;/code&gt; to a web service, then wait for a little while and then check if a mail was sent. The test runs remotely from a build server so everything it needs needs to be accesible over HTTP. So I decided to have a &lt;em&gt;real&lt;/em&gt; SMTP server running on the server writing files to a directory that a web server can pick up and show to the test. And a static web server serving the mail files in that directory. Pseudo code:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;random_id = UUID.generate()
message = subject: random_id, message: 'long rant'
server.post message
wait 1000
list_of_mails = staticServer.get
assert list_of_mails =~ random_ud
&lt;/code&gt;&lt;/pre&gt;

&lt;h3 id="dummy-smtp-server"&gt;Dummy SMTP server&lt;/h3&gt;

&lt;p&gt;I looked around on the Internet for a while. I used a Java based graphical dummy server locally called &lt;a href="https://nilhcem.github.io/FakeSMTP/"&gt;FakeSMTP&lt;/a&gt;. It is really useful when doing stuff in a graphical environment. Now I needed something headless instead. My eyes fell on a &lt;a href="https://github.com/maestrofjp/Dummy-SMTP"&gt;small Python script&lt;/a&gt; that did almost exactly what I wanted. The only thing missing was the naming of the files. In order to trace a mail through the server onto the SMTP server I needed something unique. I decided to put a UUID as the subject. The Python script needed &lt;a href="https://github.com/froderik/Dummy-SMTP"&gt;a little tweak&lt;/a&gt; to get the subject (as well as the timestamp) onto the filename.&lt;/p&gt;

&lt;p&gt;The script only works with Python 2 so make sure you have it….. I am sure it is easy to change for Python 3 for a pythonista.&lt;/p&gt;

&lt;h3 id="simple-file-serving-web-server"&gt;Simple file serving web server&lt;/h3&gt;

&lt;p&gt;Since the system &lt;strong&gt;under test&lt;/strong&gt; lives in a tomcat I started out trying to make tomcat serve static files from the folder where the SMTP server stuffs mail files. It is supposed to work but I had some problems and gave up deciding to search for a simpler solution. And suddenly there it was. Look at &lt;a href="https://docs.python.org/2/library/simplehttpserver.html"&gt;this&lt;/a&gt; beauty:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;python -m SimpleHTTPServer
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Get yourself into a directory from where you want to serve static files - type the above into the terminal and you are up and running on port &lt;code&gt;8000&lt;/code&gt;. &lt;/p&gt;

&lt;h3 id="closing-rant-about-naming"&gt;Closing rant about naming&lt;/h3&gt;

&lt;p&gt;Integration tests can mean many things. There seem to be no common vocabulary within the testing discipline. In Grails - the framework used in the micro service here - integration testing means talking directly to a controller and stubbing away third party dependencies. So the meaning here is to test the different parts and of a system together. (As opposite to unit testing.) For me integration testing normally means testing a couple of systems together and accessing it from the outside (normally with HTTP in some form). This confusion about names led me to use &lt;em&gt;black box testing&lt;/em&gt; in this article. Using another name for this does not really help but when talking about black boxes it is obvious that we are not testing or knows about any internals - a good thing.&lt;/p&gt;
</content>
  </entry>
  <entry>
    <id>tag:www.highlevelbits.com,2014-09-23:/2014/09/mistakes.html</id>
    <title type="html">The benefit of mistakes</title>
    <published>2014-09-22T22:00:00Z</published>
    <updated>2014-09-22T22:00:00Z</updated>
    <link rel="alternate" href="http://www.highlevelbits.com/2014/09/mistakes.html"/>
    <content type="html">&lt;p&gt;I stumbled upon a great post over at &lt;a href="http://www.farnamstreetblog.com/"&gt;Farnam Street&lt;/a&gt; pointing out the importance of making mistakes. Nothing new here but really good to get a reminder now and then:&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;Just because we’ve lost our way doesn’t mean that we are lost forever. In the end, it’s not the failures that define us so much as how we respond.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;Read more along these lines in &lt;a href="http://www.farnamstreetblog.com/2014/09/mistakes/"&gt;the post&lt;/a&gt;.&lt;/p&gt;
</content>
  </entry>
  <entry>
    <id>tag:www.highlevelbits.com,2014-09-17:/2014/09/fitting-the-role.html</id>
    <title type="html">Do I fit the role or does the role fit me?</title>
    <published>2014-09-16T22:00:00Z</published>
    <updated>2014-09-16T22:00:00Z</updated>
    <link rel="alternate" href="http://www.highlevelbits.com/2014/09/fitting-the-role.html"/>
    <content type="html">&lt;p&gt;I got a request for recruitment by email. And as usual the recruiter has determined that I fit a certain role very well. In this case and as always there are no consideration whether the role fits me. The recruiter asked me:&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;I believe that your profile matches the requirements for this role. And
I´am contacting you to hear if this role is consistent with your
background, and if so, are you interested to be presented to my client?&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;and my response:&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;It is indeed true that my profile matches this role. Also important to
figure out is if the role matches me. (A thing recruiters seldom
consider.) And in this case (as with a large number of similar requests
over the years) it does not. Going from freelancing to being an employed
gun for hire is not tempting at all.&lt;/p&gt;
&lt;/blockquote&gt;
</content>
  </entry>
  <entry>
    <id>tag:www.highlevelbits.com,2014-09-16:/2014/09/berlin.html</id>
    <title type="html">Berlin calling</title>
    <published>2014-09-15T22:00:00Z</published>
    <updated>2014-09-15T22:00:00Z</updated>
    <link rel="alternate" href="http://www.highlevelbits.com/2014/09/berlin.html"/>
    <content type="html">&lt;p&gt;So I have spent a couple of days in Berlin. Due to its sad history the feeling I get in Berlin is that of a broken city. The former central parts that has been revitalized feels artificial. I am looking at you, Potsdamer Platz. The city seems to have many centers rather than one. The city isn’t one yet. But it is working hard to get there. Much construction. But also lost areas that no one will care for in a very long time. It is a city of progress and the future it belongs to. Contrary to cities like Paris and Stockholm it can still shape its destiny. This is probably why it has such traction among startups. So I like many things about Berlin and since it is election times in Sweden I give you a list of things that we should pick up back in Stockholm. Most of it concerning public transportation.&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;public transportation can be cheap. A one day ticket is €6.70 - a bit more than a long distance single ticket in Stockholm.&lt;/li&gt;
  &lt;li&gt;public transportation does not need to have barriers. I guess this means that more people travel for free but on other hand it feels very inclusive. Like public transportation is part of the city.&lt;/li&gt;
  &lt;li&gt;there can be &lt;em&gt;fika&lt;/em&gt; in the subway.&lt;/li&gt;
  &lt;li&gt;it is possible to bring bicycles in subway wagons smaller than stockholm ones.&lt;/li&gt;
  &lt;li&gt;there can be enough public transportation. Not once was a train overfull despite traveling during rush hours. &lt;/li&gt;
  &lt;li&gt;there can be different kinds of street food available for around €3-5. But it probably can’t in Sweden because taxes…&lt;/li&gt;
  &lt;li&gt;a tasty beer typically lets you back some 3 or 4 euros. That is about half… Probably taxes in the way again…&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;I’ll leave you with &lt;a href="https://secure.flickr.com/photos/carst/4177229/"&gt;this nice shot&lt;/a&gt; of the berliner subway by &lt;a href="https://secure.flickr.com/photos/carst/"&gt;Carst van der Molen&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;&lt;img src="https://farm1.staticflickr.com/3/4177229_5f20534f33_b.jpg" alt="" /&gt;&lt;/p&gt;
</content>
  </entry>
</feed>
