<!DOCTYPE HTML>
<html lang="en">
  <head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta charset="utf-8">
    <title>high level bits - Java programs as daemons on Mac OS X</title>
    <link href="http://fonts.googleapis.com/css?family=Iceland%7CVolkhov" rel="stylesheet" type="text/css">
    <link rel="stylesheet" href="../../awesome/font-awesome-min.css">
    <link rel="stylesheet" href="../../style.css">

    <!-- you don't need to keep this, but it's cool for stats! -->
    <meta name="generator" content="nanoc 3.6.2">
  </head>
  <body>
    <div class="main">
      <div class="header">
        <div class="twitter-window">
          <a href="https://twitter.com/highlevelbits" class="twitter-follow-button" data-show-count="false" data-size="large">Follow @highlevelbits</a>
    <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
        </div>
        <h1>h1ghlevelb1ts</h1>
      </div>
      <div class="menu">
        <a href="../../reversedchronologically.html">all</a>
        ·
        <a href="../../archive.html">archive</a>
        ·
        hardy
        ·
        fredrik
      </div>
      <div class="content">
        <h2 class="article-header">
  <span class="byline">2009-10-05 by hardy</span>
  <br>
  Java programs as daemons on Mac OS X
</h2>

  <div class="tags">
    
      <a class="one-tag" href="#java"><span class="icon-tag"></span>java</a>
    
      <a class="one-tag" href="#mac"><span class="icon-tag"></span>mac</a>
    
  </div>

<p>For a while now I am running a local instance of <a href="http://nexus.sonatype.org/">Nexus</a> (Sonatype's maven proxy) and <a href="https://hudson.dev.java.net/">Hudson</a> (continuous integration engine ) on my MacBook. the benefits might not be so obvious initially, but I think as developer you should familiar with the tools supporting your work, even if these tools might be provided to you by some system admin. Besides, it is sometimes quite nice to trigger a clean build of the software you are working on on your own machine while still working on your local copy.<br><br>Anyways, initially I started Nexus and Hudson (which runs in a servlet container) manually when I booted my notebook. Obviously I wanted to automate this. Coming from the Linux world I tried to find the directory <i>/etc/init.d</i>. Anyone who has done the same will know that this was a futile search. It became quite quickly clear to me that Mac uses a different approach for service configuration.<br><br>A search on the internet first led me down the path of <a href="http://macdevcenter.com/pub/a/mac/2003/10/21/startup.html">StartupItems</a>, but some more research showed the better way of doing this is to use the services of the <a href="http://developer.apple.com/macosx/launchd.html">launchd</a> deamon. The are system and user specific services, configured in <i>/System/Library/LaunchAgents</i> and <i>~/System/Library/LaunchAgents</i> respectively. The configuration uses Mac's plist xml format. Since I am not really used to these plist files I had a quick check on the net. surely there must be some sort of frontend to this. And yes, there is - <a href="http://sourceforge.net/projects/lingon/files/">Lingon</a>. I am not sure how active development is on this project, but the version I downloaded did everything I wanted. The interface it quite intuitive, so there is no point to go into too much detail. Instead here comes the plist file Lingon created to for me to run Tomcat as service:</p>
<pre>
&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;<!DOCTYPE plist PUBLIC "-//Apple Computer//DTD PLIST 1.0//EN" "http:// www.apple.com/DTDs/PropertyList-1.0.dtd">
&lt;!-- Tomcat Startup Script --&gt;
&lt;plist version="1.0"&gt;
&lt;dict&gt;
  &lt;key&gt;Label&lt;/key&gt;
  &lt;string&gt;org.apache.jakarta.tomcat&lt;/string&gt;
  &lt;key&gt;OnDemand&lt;/key&gt;
  &lt;false/&gt;
  &lt;key&gt;ProgramArguments&lt;/key&gt;
  &lt;array&gt;
    &lt;string&gt;/opt/java/tomcat/bin/catalina.sh&lt;/string&gt;
    &lt;string&gt;run&lt;/string&gt;
  &lt;/array&gt;
  &lt;key&gt;ServiceDescription&lt;/key&gt;
  &lt;string&gt;Tomcat Server&lt;/string&gt;
  &lt;key&gt;StandardOutPath&lt;/key&gt;
  &lt;string&gt;/opt/java/tomcat/log/log.stdout&lt;/string&gt;
  &lt;key&gt;StandardErrorPath&lt;/key&gt;
  &lt;string&gt;/opt/java/tomcat/log.stderror&lt;/string&gt;
  &lt;key&gt;EnvironmentVariables&lt;/key&gt;
  &lt;dict&gt;
    &lt;key&gt;JAVA_HOME&lt;/key&gt;
    &lt;string&gt;/System/Library/Frameworks/JavaVM.framework/Home&lt;/string&gt;
  &lt;/dict&gt;
&lt;/dict&gt;
&lt;/plist&gt;
</pre>
<p>Easy, no?</p>
<div class="old-comments">
<h2>Old comments</h2>
<div class="one-old-comment">
<span class="comment-date">2010-02-10</span><span class="commenter-name">Pau</span><div class="comment-body">Really useful tip. I was stuck with the same problem in Hudson. Thanks!</div>
</div>
</div>


  <div class="similar-articles">
    
      
      
        <h4><a name="java">Other articles tagged java</a></h4>
        <ul>
          
            <li>
              <a href="../../2007/02/mylar-solution-to-information-overload.html">Mylar - the solution to information overload</a>
            </li>
          
            <li>
              <a href="../../2007/02/parallel-is-hard-word-to-spell-for.html">The bright future of parallel computing</a>
            </li>
          
            <li>
              <a href="../../2007/02/there-is-hope-despite-everything.html">There is hope - despite everything</a>
            </li>
          
            <li>
              <a href="../../2007/03/trends-in-sales-of-programming-language.html">Trends in sales of programming language books (and some lamenting)</a>
            </li>
          
            <li>
              <a href="../../2007/04/irony-of-application-servers.html">The irony of application servers</a>
            </li>
          
            <li>
              <a href="../../2007/04/krugle-next-google.html">Krugle the next Google?</a>
            </li>
          
            <li>
              <a href="../../2008/01/i-was-just-reading-latest-java.html">A whole new world</a>
            </li>
          
            <li>
              <a href="../../2008/02/little-curiosity-0.html">A little curiosity</a>
            </li>
          
            <li>
              <a href="../../2008/03/no-need-to-code-just-annotate-it.html">No need to code - just annotate it...</a>
            </li>
          
            <li>
              <a href="../../2008/05/explicit-nullpointerexception.html">Explicit NullPointerException</a>
            </li>
          
            <li>
              <a href="../01/jfokus-summary.html">jfokus summary</a>
            </li>
          
            <li>
              <a href="../02/introduction-to-ruby-on-rails-for-java.html">Introduction to Ruby on Rails for Java developers</a>
            </li>
          
            <li>
              <a href="../02/jpa-not-so-good-after-all.html">JPA not so good after all?</a>
            </li>
          
            <li>
              <a href="../06/two-way-ssl-with-java.html">Two way SSL with Java</a>
            </li>
          
            <li>
              <a href="../08/jaxb-with-maven_16.html">JAXB with Maven</a>
            </li>
          
            <li>
              <a href="../09/my-macbook-pro-turns-soon-1-year-and-i.html">JDiskReport.</a>
            </li>
          
            <li>
              <a href="../09/sed-to-rescue-or-how-to-migrate-from.html">sed to the rescue (or how to migrate from java.util.logging to org.slf4j)</a>
            </li>
          
            <li>
              <a href="1st-day-of-jaoo.html">1st day of JAOO</a>
            </li>
          
            <li>
              <a href="avoid-dock-icon-for-java-processes-on.html">Avoid Dock icon for Java processes on Mac OS</a>
            </li>
          
            <li>
              <a href="give-my-scripting-support-back-please.html">Give my scripting support back, please ...</a>
            </li>
          
            <li>
              <a href="../../2010/01/jfokus-2010-day-1-summary.html">jfokus 2010 day 1 summary</a>
            </li>
          
            <li>
              <a href="../../2010/01/jfokus-2010-day-2-summary.html">jfokus 2010 day 2 summary</a>
            </li>
          
            <li>
              <a href="../../2010/03/snorcle-day.html">Snorcle day</a>
            </li>
          
            <li>
              <a href="../../2010/11/where-are-my-sources.html">Where are my sources?</a>
            </li>
          
        </ul>
      
    
      
      
        <h4><a name="mac">Other articles tagged mac</a></h4>
        <ul>
          
            <li>
              <a href="../../2008/09/for-couple-of-weeks-now-i-am-proud.html">Do I love it or hate it?</a>
            </li>
          
            <li>
              <a href="../../2008/10/using-macs-textedit-from-command-line.html">Using Mac's TextEdit from the command line</a>
            </li>
          
            <li>
              <a href="../02/switching-between-hiding-and-viewing.html">Hiding and viewing dot files in Mac's Finder</a>
            </li>
          
            <li>
              <a href="../03/cycling-application-windows-on-mac-os-x.html">Cycling application windows on Mac OS X</a>
            </li>
          
            <li>
              <a href="../03/open.html">open</a>
            </li>
          
            <li>
              <a href="../09/my-macbook-pro-turns-soon-1-year-and-i.html">JDiskReport.</a>
            </li>
          
            <li>
              <a href="avoid-dock-icon-for-java-processes-on.html">Avoid Dock icon for Java processes on Mac OS</a>
            </li>
          
            <li>
              <a href="os-x-106-snow-leopard.html">OS X 10.6 Snow Leopard</a>
            </li>
          
            <li>
              <a href="../../2010/04/in-spotlight.html">In the spotlight</a>
            </li>
          
            <li>
              <a href="../../2010/07/bits-and-pieces.html">Bits and pieces</a>
            </li>
          
            <li>
              <a href="../../2010/08/swollen-macbook-pro-battery.html">Swollen MacBook Pro Battery</a>
            </li>
          
            <li>
              <a href="../../2010/10/mac-tips-visor-totalfinder.html">Mac Tips: Visor &amp; TotalFinder</a>
            </li>
          
            <li>
              <a href="../../2010/11/where-are-my-sources.html">Where are my sources?</a>
            </li>
          
        </ul>
      
    
  </div>


      </div>
      <div class="footer">
        high level bits was brought to you by
        <a href="http://about.me/hardyferentschik">hardy</a>
        and
        <a href="http://about.me/fredrik.rubensson">fredrik</a>
      </div>
    </div>
  </body>
</html>
